"use strict";axios.get("/getLevels/".concat(localStorage.id)).then(function(response){localStorage.levels=JSON.stringify(response.data.userArray.levels),JSON.parse(localStorage.levels)[4]&&(document.querySelector(".completed").style.display="inline")});var button=document.querySelector("#submitCode"),inp=document.querySelector("#code");button.addEventListener("click",function(){4<inp.value.trim().length?(document.querySelector(".overlay").style.display="flex",axios.post("/level5/auth",{code:inp.value.trim()}).then(function(response){console.log("Status is ".concat(response.data.message)),console.log("Code is ".concat(response.data.code)),document.querySelector(".overlay").style.display="none",localStorage.setItem("id",response.data.id),localStorage.setItem("levels",JSON.stringify(response.data.userArray.levels)),window.location.href="./level6"}).catch(function(){swal("Error","Wrong code","error"),document.querySelector(".overlay").style.display="none"})):swal("Error","Incorrect input","error")}),$(document).ready(function(){// Set Rating and final Score
function setRating(moves){return 127===moves?($ratingStars.eq(2).removeClass("fa-star").addClass("fa-star-o"),rating=2):128<=moves&&228>=moves?($ratingStars.eq(1).removeClass("fa-star").addClass("fa-star-o"),rating=1):229<=moves&&($ratingStars.eq(0).removeClass("fa-star").addClass("fa-star-o"),rating=0),{score:rating}}// Init Game
function initGame(tower){$tower.html(""),moves=0,$movesCount.html(0),holding=[];for(var i=1;i<=disksNum;i++)tower.prepend($("<li class=\"disk disk-"+i+"\" data-value=\""+i+"\"></li>"));$ratingStars.each(function(){$(this).removeClass("fa-star-o").addClass("fa-star")})}// Game Logic
function countMove(){moves++,$movesCount.html(moves),moves>minMoves-1&&($tower.eq(1).children().length===disksNum||$tower.eq(2).children().length===disksNum)&&swal("Sucess","The code is "+code,"info"),setRating(moves)}function tower(tower){var $disks=tower.children(),$topDisk=tower.find(":last-child"),topDiskValue=$topDisk.data("value"),$holdingDisk=$canves.find(".hold");0===$holdingDisk.length?0!==$topDisk.length&&($topDisk.addClass("hold"),holding[0]=topDiskValue):topDiskValue===holding[0]?$holdingDisk.removeClass("hold"):(topDiskValue===void 0||topDiskValue>holding[0])&&($holdingDisk.remove(),tower.append($("<li class=\"disk disk-"+holding[0]+"\" data-value=\""+holding[0]+"\"></li>")),countMove())}// Variables
var moves,code="knock-knock",holding=[],disksNum=5,minMoves=31,$canves=$("#canves"),$restart=$canves.find(".restart"),$tower=$canves.find(".tower"),$scorePanel=$canves.find("#score-panel"),$movesCount=$scorePanel.find("#moves-num"),$ratingStars=$scorePanel.find("i"),rating=3;// Event Handlers
initGame($tower.eq(0)),$canves.on("click",".tower",function(){var $this=$(this);tower($this)}),$restart.on("click",function(){swal({allowEscapeKey:!1,allowOutsideClick:!1,title:"Are you sure?",text:"Your progress will be Lost!",type:"warning",showCancelButton:!0,confirmButtonColor:"#8bc34a",cancelButtonColor:"#e91e63",confirmButtonText:"Yes, Restart Game!"}).then(function(isConfirm){isConfirm&&initGame($tower.eq(0))})})});